---
import '../styles/main.css'

// import { Debug } from 'astro/components'
import '@fontsource/patua-one'
import '@fontsource/roboto-slab'
import '@fontsource/zilla-slab'
import '@fontsource/jost'

// const astroPaths = await Astro.glob('../pages/**/*.*');
// const hierarchyPaths = {};
// for (let i = 0; i < astroPaths.length; i++) {
//   const path = astroPaths[i];

//   const url = path.url;
//   const splittedPath = url.slice(1).split('/');
// }

import { getMenuItems } from '@ts/queries'
import Footer from '@src/components/Footer.astro'
import NavBar from '@src/components/NavBar.vue'

export interface Props {
  title: string;
}

const { title } = Astro.props as Props
// const menuResponse = await getAllPageSlugs();
const menuResponse = await getMenuItems()
// const menuItems = menuResponse?.map((menuItem) => {
//   // console.log(page);
//   return { url: menuItem?.connectedNode?.node?.uri, name: menuItem?.label }
// })

let currentUrl = Astro.url.pathname
if (!currentUrl.endsWith('/')) {
  currentUrl += '/'
}
---

<!DOCTYPE html>
  <html lang="en" class="scroll-pt-24 md:scroll-pt-28 scroll-smooth">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width" />
      <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
      <meta name="generator" content={Astro.generator} />
      <title>{title}</title>
    </head>
    <body class="flex flex-col min-h-screen">
      <div class="fixed top-0 left-0 right-0 z-10">
        <NavBar menuItems={menuResponse} currentUrl={currentUrl} client:idle>Fuck yeah</NavBar>
        <!-- <div class="block md:hidden">
          <MobileMenu menuItems={menuResponse} currentUrl={currentUrl} client:idle/>
        </div> -->
      </div>
      <div class="mt-16 md:mt-20 p-2 sm:p-6" >
        <slot/>
      </div>
      <Footer class="mt-auto" />
    </body>
  </html>
  <style>
  /* :root {
    --font-size-base: clamp(1rem, 0.34vw + 0.91rem, 1.19rem);
    --font-size-lg: clamp(1.2rem, 0.7vw + 1.2rem, 1.5rem);
    --font-size-xl: clamp(2.44rem, 2.38vw + 1.85rem, 3.75rem);

    --color-text: hsl(12, 5%, 4%);
    --color-bg: hsl(10, 21%, 95%);
    --color-border: hsl(17, 24%, 90%);
  }

  html {
    font-size: var(--font-size-base);
    color: var(--color-text);
    background-color: var(--color-bg);
  }

  body {
    margin: 0;
  }

  :global(h1) {
    font-size: var(--font-size-xl);
  }

  :global(h2) {
    font-size: var(--font-size-lg);
  } */

  </style>
